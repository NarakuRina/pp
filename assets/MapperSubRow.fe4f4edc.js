import{s as o,a as r,c,f as b,r as g,b as l,F as v,j as e,E as S,x as M}from"./index.77e41bb5.js";import{l as T,t as m}from"./index.9b9e2211.js";import{P as C,F as $,S as A,a as W,b as y,c as E,d as R}from"./usePersistQuery.8ef62d90.js";import{T as f}from"./Text.4b203bac.js";const z=o("button",{all:"unset",width:"100%",cursor:"pointer",borderRadius:r.sm,"&:hover":{background:c.sand4},variants:{expanded:{true:{background:c.sand4}}}}),B=o("div",{width:"100%",padding:`${r.xxs} ${r.sm}`,borderRadius:r.sm,display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"flex-end",gap:r.md}),F=o("td",{fontSize:b[75]}),k=o("td",{padding:r.xs,paddingRight:r.md}),P=o("td",{width:"85%",fontWeight:"bold",fontSize:b[150],padding:r.xxs,paddingRight:r.sm}),j=o("div",{variants:{first:{true:{fontSize:b[125]},false:{fontSize:b[75]}}}}),I=o(C,{flex:"1 1 auto",borderRadius:r.xs,height:"1em",width:"auto"}),N=o("div",{minWidth:"3em",textAlign:"center"}),U=t=>({[1]:"gold",[2]:"silver",[3]:c.bronze.toString()})[t]||"grey",V=({names:t})=>e(v,{children:t.map((n,i)=>e(j,{first:i===0,children:n},i))}),L=g.exports.memo(function({mapper:n,maxValue:i,isExpanded:h,onToggleMapper:u}){return l(v,{children:[l(F,{children:[n.place,"."]}),e(k,{children:e(S,{url:M(n.id),children:e(V,{names:n.names})})}),e(P,{children:e(z,{expanded:h,onClick:()=>u(n.id),children:l(B,{children:[e(N,{children:Math.round(n.value)}),e(I,{progress:n.value/i,color:U(n.place)}),e($,{flipped:h})]})})})]})}),_=o("table",{borderCollapse:"collapse",width:r.tableMaxWidth,maxWidth:"100%",margin:"0 auto"}),q=o("tr",{width:"100%",borderBottom:`${r.borderWidth} solid ${c.border}`}),X=({mappers:t,maxValue:n,loadMore:i,renderExpandedRow:h,scrollParent:u})=>{const[x,s]=g.exports.useState({}),p=g.exports.useCallback(a=>{s(d=>({...d,[a]:!d[a]}))},[]),w=g.exports.useMemo(()=>t==null?void 0:t.reduce((a,d)=>(a.push(d),x[d.id]&&a.push({...d,isExpandRow:!0}),a),[]),[t,x]);return e(T,{style:{width:"100%"},data:w,endReached:i,overscan:1e3,components:{TableRow:q,Table:_},itemContent:(a,d)=>d.isExpandRow?e("td",{colSpan:3,children:h({mapper:d,index:a})}):e(L,{isExpanded:x[d.id],onToggleMapper:p,mapper:d,maxValue:n}),customScrollParent:u})},D=o("div",{fontSize:"1rem",fontWeight:"normal",padding:`0 ${r.xl}`,boxShadow:`inset 0 -1em 0.75em -1em ${c.sand1}, inset 0 1em 0.75em -1em ${c.sand1}`,"& td":{width:"50%",padding:r.xs},"& tr":{borderBottom:`${r.borderWidth} solid ${c.border}`},"& table":{borderCollapse:"collapse",width:"100%"}}),G=o(C,{width:"100%",borderRadius:r.xxs,height:"1.3em",lineHeight:1.4}),Y=({data:t,children:n,customHeaderRow:i,getUrl:h})=>{const u=t?t.reduce((s,p)=>s+p.value,0)/t.length:0,x=t?t[0].value:0;return l(D,{children:[n,t&&l(A,{children:[e(W,{css:{maxHeight:"20em",height:"auto"},children:l("table",{children:[e("thead",{children:i!=null?i:l("tr",{children:[e("td",{}),l("td",{children:[e(f,{bold:!0,children:t.length})," maps; average points per map:"," ",e(f,{bold:!0,children:m(u)})]})]})}),e("tbody",{children:t.map(s=>l("tr",{children:[e("td",{children:e(S,{url:h(s.id),children:s.text})}),e("td",{children:e(G,{progress:s.value/x,children:e("div",{style:{position:"absolute",top:0,left:"0.4em"},children:m(s.value,10)})})})]},s.id))})]})}),e(y,{orientation:"vertical",children:e(E,{})}),e(R,{})]})]})};export{Y as M,X as a};
