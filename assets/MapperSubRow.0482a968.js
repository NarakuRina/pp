import{s as o,a as r,c,f as x,r as p,b as l,F as f,j as e,E as v}from"./index.acc8092d.js";import{l as M,t as g}from"./index.12060498.js";import{P as S,F as $,S as T,a as y,b as A,c as W,d as E}from"./usePersistQuery.2e2b489d.js";import{T as m}from"./Text.9813b443.js";const R=o("button",{all:"unset",width:"100%",cursor:"pointer",borderRadius:r.sm,"&:hover":{background:c.sand4},variants:{expanded:{true:{background:c.sand4}}}}),z=o("div",{width:"100%",padding:`${r.xxs} ${r.sm}`,borderRadius:r.sm,display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"flex-end",gap:r.md}),B=o("td",{fontSize:x[75]}),F=o("td",{padding:r.xs,paddingRight:r.md}),k=o("td",{width:"85%",fontWeight:"bold",fontSize:x[150],padding:r.xxs,paddingRight:r.sm}),P=o("div",{variants:{first:{true:{fontSize:x[125]},false:{fontSize:x[75]}}}}),j=o(S,{flex:"1 1 auto",borderRadius:r.xs,height:"1em",width:"auto"}),I=o("div",{minWidth:"3em",textAlign:"center"}),N=t=>({[1]:"gold",[2]:"silver",[3]:c.bronze.toString()})[t]||"grey",V=({names:t})=>e(f,{children:t.map((n,i)=>e(P,{first:i===0,children:n},i))}),L=p.exports.memo(function({mapper:n,maxValue:i,isExpanded:h,onToggleMapper:u}){return l(f,{children:[l(B,{children:[n.place,"."]}),e(F,{children:e(v,{url:`https://osu.ppy.sh/users/${n.id}`,children:e(V,{names:n.names})})}),e(k,{children:e(R,{expanded:h,onClick:()=>u(n.id),children:l(z,{children:[e(I,{children:Math.round(n.value)}),e(j,{progress:n.value/i,color:N(n.place)}),e($,{flipped:h})]})})})]})}),_=o("table",{borderCollapse:"collapse",width:"100%",maxWidth:r.tableMaxWidth}),q=o("tr",{width:"100%",borderBottom:`${r.borderWidth} solid ${c.border}`}),U=({mappers:t,maxValue:n,loadMore:i,renderExpandedRow:h,scrollParent:u})=>{const[s,b]=p.exports.useState({}),C=p.exports.useCallback(a=>{b(d=>({...d,[a]:!d[a]}))},[]),w=p.exports.useMemo(()=>t==null?void 0:t.reduce((a,d)=>(a.push(d),s[d.id]&&a.push({...d,isExpandRow:!0}),a),[]),[t,s]);return e(M,{style:{width:"100%"},data:w,endReached:i,overscan:1e3,components:{TableRow:q,Table:_},itemContent:(a,d)=>d.isExpandRow?e("td",{colSpan:3,children:h({mapper:d,index:a})}):e(L,{isExpanded:s[d.id],onToggleMapper:C,mapper:d,maxValue:n}),customScrollParent:u})},D=o("div",{fontSize:"1rem",fontWeight:"normal",padding:`0 ${r.xl}`,boxShadow:`inset 0 -1em 0.75em -1em ${c.sand1}, inset 0 1em 0.75em -1em ${c.sand1}`,"& td":{width:"50%",padding:r.xs},"& tr":{borderBottom:`${r.borderWidth} solid ${c.border}`},"& table":{borderCollapse:"collapse",width:"100%"}}),G=o(S,{width:"100%",borderRadius:r.xxs,height:"1.3em",lineHeight:1.4}),X=({data:t,children:n,customHeaderRow:i})=>{const h=t?t.reduce((s,b)=>s+b.value,0)/t.length:0,u=t?t[0].value:0;return l(D,{children:[n,t&&l(T,{children:[e(y,{css:{maxHeight:"20em",height:"auto"},children:l("table",{children:[e("thead",{children:i!=null?i:l("tr",{children:[e("td",{}),l("td",{children:[e(m,{bold:!0,children:t.length})," maps; average points per map:"," ",e(m,{bold:!0,children:g(h)})]})]})}),e("tbody",{children:t.map(s=>l("tr",{children:[e("td",{children:e(v,{url:`https://osu.ppy.sh/beatmapsets/${s.id}`,children:s.text})}),e("td",{children:e(G,{progress:s.value/u,children:e("div",{style:{position:"absolute",top:0,left:"0.4em"},children:g(s.value,10)})})})]},s.id))})]})}),e(A,{orientation:"vertical",children:e(W,{})}),e(E,{})]})]})};export{X as M,U as a};
