import{s as o,a as r,c,f as g,r as x,b as l,F as f,j as e,E as v,w as M,x as T}from"./index.ed2c5c72.js";import{l as $,t as p}from"./index.d42f011c.js";import{P as S,F as A,S as W,a as y,b as B,c as E,d as R}from"./usePersistQuery.488cfa96.js";import{T as m}from"./Text.683d1077.js";const z=o("button",{all:"unset",width:"100%",cursor:"pointer",borderRadius:r.sm,"&:hover":{background:c.sand4},variants:{expanded:{true:{background:c.sand4}}}}),F=o("div",{width:"100%",padding:`${r.xxs} ${r.sm}`,borderRadius:r.sm,display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"flex-end",gap:r.md}),k=o("td",{fontSize:g[75]}),P=o("td",{padding:r.xs,paddingRight:r.md}),j=o("td",{width:"85%",fontWeight:"bold",fontSize:g[150],padding:r.xxs,paddingRight:r.sm}),I=o("div",{variants:{first:{true:{fontSize:g[125]},false:{fontSize:g[75]}}}}),N=o(S,{flex:"1 1 auto",borderRadius:r.xs,height:"1em",width:"auto"}),U=o("div",{minWidth:"3em",textAlign:"center"}),V=t=>({[1]:"gold",[2]:"silver",[3]:c.bronze.toString()})[t]||"grey",L=({names:t})=>e(f,{children:t.map((n,i)=>e(I,{first:i===0,children:n},i))}),_=x.exports.memo(function({mapper:n,maxValue:i,isExpanded:h,onToggleMapper:u}){return l(f,{children:[l(k,{children:[n.place,"."]}),e(P,{children:e(v,{url:M(n.id),children:e(L,{names:n.names})})}),e(j,{children:e(z,{expanded:h,onClick:()=>u(n.id),children:l(F,{children:[e(U,{children:Math.round(n.value)}),e(N,{progress:n.value/i,color:V(n.place)}),e(A,{flipped:h})]})})})]})}),q=o("table",{borderCollapse:"collapse",width:"100%",maxWidth:r.tableMaxWidth}),D=o("tr",{width:"100%",borderBottom:`${r.borderWidth} solid ${c.border}`}),Y=({mappers:t,maxValue:n,loadMore:i,renderExpandedRow:h,scrollParent:u})=>{const[d,b]=x.exports.useState({}),w=x.exports.useCallback(a=>{b(s=>({...s,[a]:!s[a]}))},[]),C=x.exports.useMemo(()=>t==null?void 0:t.reduce((a,s)=>(a.push(s),d[s.id]&&a.push({...s,isExpandRow:!0}),a),[]),[t,d]);return e($,{style:{width:"100%"},data:C,endReached:i,overscan:1e3,components:{TableRow:D,Table:q},itemContent:(a,s)=>s.isExpandRow?e("td",{colSpan:3,children:h({mapper:s,index:a})}):e(_,{isExpanded:d[s.id],onToggleMapper:w,mapper:s,maxValue:n}),customScrollParent:u})},G=o("div",{fontSize:"1rem",fontWeight:"normal",padding:`0 ${r.xl}`,boxShadow:`inset 0 -1em 0.75em -1em ${c.sand1}, inset 0 1em 0.75em -1em ${c.sand1}`,"& td":{width:"50%",padding:r.xs},"& tr":{borderBottom:`${r.borderWidth} solid ${c.border}`},"& table":{borderCollapse:"collapse",width:"100%"}}),J=o(S,{width:"100%",borderRadius:r.xxs,height:"1.3em",lineHeight:1.4}),Z=({data:t,children:n,customHeaderRow:i})=>{const h=t?t.reduce((d,b)=>d+b.value,0)/t.length:0,u=t?t[0].value:0;return l(G,{children:[n,t&&l(W,{children:[e(y,{css:{maxHeight:"20em",height:"auto"},children:l("table",{children:[e("thead",{children:i!=null?i:l("tr",{children:[e("td",{}),l("td",{children:[e(m,{bold:!0,children:t.length})," maps; average points per map:"," ",e(m,{bold:!0,children:p(h)})]})]})}),e("tbody",{children:t.map(d=>l("tr",{children:[e("td",{children:e(v,{url:T(d.id),children:d.text})}),e("td",{children:e(J,{progress:d.value/u,children:e("div",{style:{position:"absolute",top:0,left:"0.4em"},children:p(d.value,10)})})})]},d.id))})]})}),e(B,{orientation:"vertical",children:e(E,{})}),e(R,{})]})]})};export{Z as M,Y as a};
